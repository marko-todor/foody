<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title> Buy a product </title>

	<!-- Bootstrap core CSS -->
	<link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<link href="../css/shopping-cart.css" rel="stylesheet">

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

</head>


<body onload = "load()">

	 <!-- Navigation -->
  <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-danger fixed-top">
    <div class="container">
      <a class="navbar-brand" href="../index.html"><img id="logo" src="../images/logo_transparent.png"> Foody </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon "></span>
      </button>
      <div class="collapse navbar-collapse text-center" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="about.html">About us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="my-orders.html">Orders</a>
          </li>         
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Restaurants
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="stari-grad.html"> Old city </a>
              <a class="dropdown-item" href="dorcol.html"> Dorcol </a>
              <a class="dropdown-item" href="vracar.html"> Vracar </a>
              <a class="dropdown-item" href="zvezdara.html"> Zvezdara </a>
            </div>
          </li>
          <li class="nav-item" id = "loginText">
            
          </li>
        </ul>
      </div>
    </div>
  </nav>

	
	<div class="container" style="margin-top: 150px;">


		<div class = "row">
			<div class="col-sm-12">
				<div class="jumbotron jumbotron-fluid text-center">
					<h1> Please fill out the form correctly </h1>
					<p>If you encounter any problems while ordering,</p> 
					<p>feel free to contact us at support@mail.com or by phone +381 123-45-67.</p>
					<p>Time of delivery is guaranteed within 60min.</p>
					<p>If the delivery is late, your money will be refunded.</p>
				</div>
			</div>
		</div>	
		
		<div class = "row">
			<div class="col-sm-12">	
				<h1>Contact information:</h1>
			</div>
		</div>
		
		<div class = "row">
			<div class="col-sm-12">		
				<strong>Delivery data</strong>
				<br>
			</div>
		</div>
		
		<hr/>

		<form name="shippingForm">
		<div class="shipping-info">
			<div class = "row">
				<div class="col-sm-8">
					<span class="required-lbl">* </span><label class="control-label" for="firstname">Your name</label>
					<div class="controls">
						<input id="firstname" name="firstname" type="text" placeholder="" class="form-control" required="">
					</div>
				</div>
			</div>

			<hr/>
			
			<div class = "row">    
				<div class="col-sm-8">
					<span class="required-lbl">* </span><label class="control-label" for="lastname">Your last name</label>
					<div class="controls">
						<input id="lastname" name="lastname" type="text" placeholder="" class="form-control" required="">
					</div>
				</div>
			</div>
			
			<hr/>
			
			<div class = "row"> 
				<div class="form-group col-sm-8">
					<span class="required-lbl">* </span><label class="control-label" for="shippingaddress">Delivery address</label>
					<div class="controls">
						<input id="shippingaddress" name="shippingaddress" type="text" placeholder="" class="form-control" required="">
					</div>
				</div>
			</div>
			
			<hr/>
			
			
			<div class = "row"> 
				<div class="col-sm-3">
					<span class="required-lbl">* </span><label class="control-label" for="shippingcountry">Country</label>
					<div class="controls">
						<div class="controls">
							<select id="shippingcountry" name="shippingcountry" class="input-xlarge">
								<option value="">Select a country</option>
								<option>Serbia</option>
							</select>
						</div>
					</div>
				</div>
				<div class="col-sm-3">
					<span class="required-lbl">* </span><label class="control-label" for="shippingcity">Grad</label>
					<div class="controls">
						<select id="shippingcity" name="shippingcity" class="input-xlarge">
							<option value="">Select a city</option>
							<option>Belgrade</option>
							<option>Novi Sad</option>
							<option>Nis</option>
							<option>Kragujevac</option>
						</select>
					</div>
				</div>
			</div>
			
			<hr/>
			

			<div class = "row">
				<div class="col-sm-12">		
					<strong>Paying information</strong>
					<br>
				</div>
			</div>
			
			<hr/>
			
			<div class="row">
				<div class="col-sm-8">
					<div class="control-group">
						<span class="required-lbl">* </span><label class="control-label" for="cardnumber">Credit card number</label>
						<div class="controls">
							<input id="cardnumber" name="cardnumber" type="text" placeholder="" class="form-control" required="">
						</div>
					</div>
				</div>
			</div>
			
			<div class="row" style="margin-top:15px; margin-left:1px;">	
				<div class="col-sm-8">
					<div class="panel panel-default credit-card-box">
						<div class="panel-heading display-table">
							<div class="row display-tr">
								<img class="img-responsive pull-right" src="http://i76.imgup.net/accepted_c22e0.png">
							</div>
						</div>
					</div>
				</div>
			</div>    
			
			
			
			<hr/>
			
			<div class="row">
				<div class="col-sm-6">
					<div class="control-group">
						<label class="control-label" for="iaccept"></label>
						<div class="controls">
							<label class="checkbox" for="iaccept-0">
								<input type="checkbox" name="iaccept" id="iaccept-0" value="I accept the Teams and conditions">
								I accept the <a href="">Teams and conditions</a>
							</label>
						</div>
					</div>
				</div>
			</div>
			
			<br>

			
		</div>
	</form>
		

		
		
		<div class = "row">
			<table id="cart" class="table table-hover table-condensed">
				<thead>
					<tr>
						<th style="width:50%">Product</th>
						<th style="width:10%">Price</th>
						<th style="width:8%">Quantity</th>
						<th style="width:22%" class="text-center">In total</th>
						<th style="width:10%"></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td data-th="Proizvod">
							<div class="row">
								<div class="col-sm-2"><img src="" class="img img-fluid" id="orderFormImg"></div>
								<div class="col-sm-10">
									<h4 class="nomargin" id="orderFormItem"></h4>
									<p id="orderFormDesc"></p>
								</div>
							</div>
						</td>
						<td id="orderFormPrice">  </td>
						<td>
							<input type="number" class="form-control text-center" value="1" id="orderFormQuantity">
						</td>
						<td class="text-center"> 
							<label id="orderFormPrice"></label>
							&nbsp; &nbsp;
							<button class="btn btn-danger btn-sm" onClick="cancel()"><i class="fas fa-times"></i></button>
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr class="visible-xs">
						<td class="text-center"><strong id="orderFormTotalxs"></strong></td>
					</tr>
					<tr>

						<td><a class="btn btn-warning" onclick="cancel()"> Cancel <i class="far fa-trash-alt"></i> 
						</a></td>
						<td colspan="2" class="hidden-xs"></td>
						<td class="hidden-xs text-center"><strong id="orderFormTotal"> </strong></td>
						<td><a href="#" class="btn btn-success" onclick="confirm()"> Check <i class="far fa-file-pdf"></i></a></td>
					</tr>
				</tfoot>
			</table>
		</div>

	</div>
	<script>
		function load() {

			if ('localStorage' in window && window.localStorage !== null) {
				if(!localStorage.getItem('user')) {
					document.getElementById('loginText').innerHTML = "<a class='nav-link' href ='login.html'>Log in</a>";
				} else {
					document.getElementById('loginText').innerHTML = "<a class='nav-link' href ='order-form.html' onclick = 'logout()'>Log out</a>";
				}

				document.getElementById("orderFormItem").innerHTML = localStorage.getItem("orderFormItem");
				document.getElementById("orderFormImg").src = localStorage.getItem("orderFormImg");
				document.getElementById("orderFormPrice").innerHTML = localStorage.getItem("orderFormPrice") + " RSD";
				document.getElementById("orderFormDesc").innerHTML = localStorage.getItem("orderFormDesc");

				var quantity = document.getElementById("orderFormQuantity").value - 0;
				var unitPrice = localStorage.getItem("orderFormPrice") - 0;

				//var total = quantity * price; nece da mnozi

				document.getElementById("orderFormTotalxs").innerHTML =  unitPrice + " RSD";
				document.getElementById("orderFormTotal").innerHTML = "Raƒçun " + unitPrice + " RSD";
				
			}
		}

		function cancel() {

			localStorage.removeItem("orderFormItem");
			localStorage.removeItem("orderFormImg");
			localStorage.removeItem("orderFormPrice");
			localStorage.removeItem("orderFormDesc");

			window.open("restaurants.html");

		}

		function confirm() {

			var firstname = document.shippingForm.firstname.value;
			var lastname = document.shippingForm.lastname.value;
			var shippingaddress = document.shippingForm.shippingaddress.value;
			var shippingcountry =  document.shippingForm.shippingcountry.options[document.shippingForm.shippingcountry.selectedIndex].value;
			var shippingcity =  document.shippingForm.shippingcity.options[document.shippingForm.shippingcity.selectedIndex].value;
			var cardnumber =  document.shippingForm.cardnumber.value;
			var accepted =  document.shippingForm.iaccept.checked;

			// if (firstname=="" || lastname=="" || shippingcountry="" || shippingaddress=="" || shippingcity=="" || cardnumber=="") {
			// 	alert("Morate uneti sve podatke!");
			// }
			

			var ordersSession = localStorage.getItem("ordersSession");


			var newOrder = "<tr><td data-th='Proizvod'><div class='row'><div class='col-sm-2'><img src='" + localStorage.getItem("orderFormImg") + "' class='img img-fluid' " + "></div><div class='col-sm-10'><h4 class='nomargin'>" + localStorage.getItem("orderFormItem") + "</h4><p>" + localStorage.getItem("orderFormDesc") + "</p></div></div></td><td>" + localStorage.getItem("orderFormPrice") + "</td><td> <input type='number' class='form-control text-center' value='1'></td><td class='text-center'><label>" + localStorage.getItem("orderFormPrice") + "</label> &nbsp; &nbsp; <button class='btn btn-danger btn-sm'><i class='fas fa-times'></i></button></td></tr>";

			if (ordersSession != null) {
				ordersSession += newOrder;
			}
			else ordersSession = newOrder;
			
			localStorage.setItem("ordersSession", ordersSession);
			window.open("my-orders.html");

		}

		
		
	</script>

</body>

</html>